<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <title>Home - LabMaker</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="css/labmaker.css">
</head>

<body>

<header class="topbar">
    <div class="brand-row">
        <div class="logo-square">IF</div>
        <div>
            <h1>LabMaker</h1>
            <p class="muted">Bem-vindo ao sistema de filas</p>
        </div>
    </div>

    <div class="right-actions">
        <a href="perfil" class="btn-ghost">Meu Perfil</a>
        <button id="logoutBtn" class="btn-ghost red">Sair</button>
    </div>
</header>

<main class="container">

    <section class="welcome-box card">
        <h2>Bem-vindo(a), <span id="userName"></span>! üëã</h2>
        <p class="muted">
            Este √© o sistema oficial de gest√£o de filas de impress√£o 3D do  
            <b>LabMaker - IFFar Campus S√£o Vicente do Sul</b>.
        </p>

        <div class="logo-stack big">
            <div class="sq coral"></div>
            <div class="sq green"></div>
            <div class="sq blue"></div>
        </div>

        <p style="margin-top:10px">
            Aqui voc√™ pode criar solicita√ß√µes de impress√£o, acompanhar o andamento,
            conferir sua posi√ß√£o na fila e ver o hist√≥rico.
        </p>
    </section>

    <section class="card actions-grid">

        <a href="new" class="action-button">
            <div class="icon-box coral"></div>
            <span>Nova Requisi√ß√£o</span>
        </a>

        <a href="perfil" class="action-button">
            <div class="icon-box blue"></div>
            <span>Minhas Impress√µes</span>
        </a>

        <a id="adminRequisicoes" href="lista-req" class="action-button hidden">
            <div class="icon-box green"></div>
            <span>Requisi√ß√µes (ADM)</span>
        </a>

        <a id="adminUsuarios" href="lista-usr" class="action-button hidden">
            <div class="icon-box coral"></div>
            <span>Usu√°rios (ADM)</span>
        </a>

    </section>

</main>

<script src="js/utils.js"></script>
<script src="js/api.js"></script>

<script>
    // Inicializa√ß√£o da Home
    const user = utils.getCurrentUser();

    if (!user) {
        location.href = "login";
    }

    document.getElementById("userName").textContent = user.nome;

    if (user.tipo === "ADMIN") {
        document.getElementById("adminRequisicoes").classList.remove("hidden");
        document.getElementById("adminUsuarios").classList.remove("hidden");
    }

    document.getElementById("logoutBtn").addEventListener("click", () => {
        utils.logout();
        location.href = "login";
    });
</script>

</body>
</html>
